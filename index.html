<!doctype html>
<html lang="tr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>SÄ±nav HazÄ±rlama ModÃ¼lÃ¼</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <!-- KaTeX (sayfadaki canlÄ± Ã¶nizleme iÃ§in) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js"></script>
</head>

<body>
    <header class="topbar">
        <div class="container row">
            <div class="brand">
                <div class="brandRow">
                    <div class="schoolIcon">ğŸ«</div>
                    <div>
                        <div class="title">SÄ±nav HazÄ±rlama ModÃ¼lÃ¼</div>
                        <div class="subtitle muted">SorularÄ± ekle â†’ PDF veya Cevap AnahtarÄ± indir</div>
                    </div>
                </div>
            </div>

            <div class="actions">
                <button class="btn primary pdfBtn" id="btnPdf" type="button">ğŸ“„ PDF OluÅŸtur</button>
                <button class="btn primary keyBtn" id="btnKey" type="button">ğŸ—ï¸ Cevap AnahtarÄ±</button>
            </div>
        </div>
    </header>

    <main class="container grid">
        <section class="card">
            <h2>Genel Ayarlar</h2>

            <div class="settingsGroup">
                <div class="groupTitle">ğŸ« Okul Bilgileri</div>

                <label class="field">
                    <span>Okul AdÄ±</span>
                    <input id="schoolName" type="text" value="KARS FEN LÄ°SESÄ°" />
                </label>

                <label class="field">
                    <span>EÄŸitim-Ã–ÄŸretim YÄ±lÄ±</span>
                    <input id="schoolYear" type="text" value="2025/2026 EÄÄ°TÄ°M-Ã–ÄRETÄ°M YILI" />
                </label>
            </div>

            <div class="settingsGroup">
                <div class="groupTitle">ğŸ“ SÄ±nav Bilgileri</div>

                <label class="field">
                    <span>Ders / DÃ¶nem SatÄ±rÄ±</span>
                    <input id="courseLine" type="text" value="BÄ°LGÄ°SAYAR BÄ°LÄ°MÄ° DERSÄ° 1. DÃ–NEM" />
                </label>

                <label class="field">
                    <span>SÄ±nav BaÅŸlÄ±ÄŸÄ±</span>
                    <input id="examTitle" type="text" value="9. SINIF 1. YAZILI SINAVI" />
                </label>

                <label class="field">
                    <span>Tarih</span>
                    <input id="examDate" type="text" placeholder="__/__/____" />
                </label>
            </div>

            <div class="settingsGroup">
                <div class="groupTitle">ğŸ§¾ Alt Bilgi (Footer)</div>

                <label class="field">
                    <span>PDF Alt YazÄ±</span>
                    <input id="footerText" type="text" value="BaÅŸarÄ±lar Mehmet PEKER" />
                </label>
            </div>
        </section>

        <section class="card">
            <div class="row between">
                <h2>Sorular</h2>
            </div>

            <div class="qList" id="questionList"></div>

            <div class="row end">
                <button class="btn" id="btnAdd2" type="button">+ Soru Ekle</button>
            </div>
        </section>
    </main>


    <!-- ===================== TEMPLATES ===================== -->

    <template id="tplQuestion">
        <div class="qCard" data-qid="">
            <div class="qHead">
                <div class="qMeta">
                    <div class="qMetaTop">
                        <span class="qNo">1. Soru</span>

                        <select class="qType">
                            <option value="classic">Klasik</option>
                            <option value="mc">Ã‡oktan SeÃ§meli</option>
                            <option value="tf">DoÄŸru / YanlÄ±ÅŸ (BÃ¶lÃ¼m)</option>
                            <option value="match">EÅŸleÅŸtirme (BÃ¶lÃ¼m)</option>
                            <option value="code">Kod Sorusu</option>
                            <option value="math">Matematik Sorusu</option>
                        </select>

                        <div class="qScore">
                            <input class="qPoints" type="number" min="1" max="100" value="10" />
                            <span class="muted">puan</span>
                        </div>

                        <div class="qMetaBottom">
                            <div class="qInlineCtl">
                                <div class="ctl">
                                    <span class="ctlLbl">YazÄ±</span>
                                    <button class="btn sm qFontDec" type="button">A-</button>
                                    <input class="qFont" type="number" min="8" max="22" value="11" />
                                    <button class="btn sm qFontInc" type="button">A+</button>
                                </div>

                                <div class="ctl">
                                    <span class="ctlLbl">BoÅŸluk</span>
                                    <input class="qLines" type="number" min="0" max="30" value="0" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="qBtns">
                    <button class="btn sm up" type="button">â†‘</button>
                    <button class="btn sm down" type="button">â†“</button>
                    <button class="btn sm danger del" type="button">Sil</button>
                </div>
            </div>

            <!-- Normal soru metni (math seÃ§ilince otomatik gizlenecek) -->
            <label class="field qTextWrap">
                <span>Soru Metni</span>
                <textarea class="qText" rows="4" placeholder="Soru metni..."></textarea>
            </label>

            <!-- ===== CLASSIC ===== -->
            <div class="qBody classic">
                <label class="field">
                    <span>Cevap (Ã¶ÄŸretmen)</span>
                    <textarea class="qAnswer" rows="4" placeholder="Cevap / Ã§Ã¶zÃ¼m notu..."></textarea>
                </label>
            </div>

            <!-- ===== MC ===== -->
            <div class="qBody mc hidden">
                <div class="row between">
                    <div class="muted">SeÃ§enekler</div>
                    <button class="btn sm addOption" type="button">+ SeÃ§enek</button>
                </div>

                <div class="row" style="margin-top:10px;">
                    <label class="field" style="margin:0; width:220px;">
                        <span>DoÄŸru ÅÄ±k</span>
                        <select class="mcCorrect"></select>
                    </label>
                </div>

                <div class="optList"></div>

                <label class="field">
                    <span>Cevap Notu (Ã¶ÄŸretmen)</span>
                    <textarea class="qAnswer" rows="3" placeholder="KÄ±sa aÃ§Ä±klama / Ã§Ã¶zÃ¼m ipucu..."></textarea>
                </label>
            </div>

            <!-- ===== TF ===== -->
            <div class="qBody tf hidden">
                <div class="row between">
                    <div class="muted">Bu blok tek bir <b>DoÄŸru/YanlÄ±ÅŸ bÃ¶lÃ¼mÃ¼</b> Ã¼retir.</div>
                    <button class="btn sm addTF" type="button">+ Madde</button>
                </div>
                <div class="tfList"></div>
            </div>

            <!-- ===== MATCH ===== -->
            <div class="qBody match hidden">
                <div class="row between">
                    <div class="muted">Bu blok tek bir <b>EÅŸleÅŸtirme bÃ¶lÃ¼mÃ¼</b> Ã¼retir.</div>
                    <button class="btn sm addPair" type="button">+ Ã‡ift</button>
                </div>
                <div class="pairGrid"></div>
            </div>

            <!-- ===== MATH ===== -->
            <div class="qBody math hidden">
                <div class="row" style="gap:8px; flex-wrap:wrap; margin:6px 0 8px 0;">
                    <button class="btn sm mIns" type="button" data-insert="\frac{}{}">Kesir</button>
                    <button class="btn sm mIns" type="button" data-insert="\sqrt{}">KÃ¶k</button>
                    <button class="btn sm mIns" type="button" data-insert="^{}">Ãœs</button>
                    <button class="btn sm mIns" type="button" data-insert="_{}">Alt indis</button>
                    <button class="btn sm mIns" type="button" data-insert="\pi">Ï€</button>
                    <button class="btn sm mIns" type="button" data-insert="\le">â‰¤</button>
                    <button class="btn sm mIns" type="button" data-insert="\ge">â‰¥</button>
                </div>

                <label class="field">
                    <span>Matematik AÃ§Ä±klamasÄ±</span>
                    <textarea class="mathPrompt" rows="3"
                        placeholder="Ã–rn: AÅŸaÄŸÄ±daki ifadeyi sadeleÅŸtiriniz."></textarea>
                </label>

                <label class="field">
                    <span>Matematik Ä°fadesi (LaTeX)</span>
                    <textarea class="mathExpr" rows="3"
                        placeholder="Ã–rn: \frac{a^2+b^3}{a^4+b} + \frac{\sqrt{a}}{b^3-a^2}"></textarea>
                </label>

                <div class="muted" style="font-size:12px;margin-top:4px;">
                    Ä°pucu: Butonlarla ekle. Ã–nizleme KaTeX ile, PDF de KaTeX ile Ã§Ä±kar.
                </div>

                <div class="card" style="margin-top:10px; padding:12px;">
                    <div style="font-weight:800; margin-bottom:8px;">CanlÄ± Ã–nizleme</div>
                    <div class="mathPreview muted">Ä°fade yazÄ±nca burada gÃ¶rÃ¼necek.</div>
                </div>

                <label class="field">
                    <span>Cevap (Ã¶ÄŸretmen) (LaTeX ya da aÃ§Ä±klama)</span>
                    <textarea class="qAnswer" rows="3" placeholder="Ã–rn: \frac{...}{...}"></textarea>
                </label>
            </div>

            <!-- ===== CODE ===== -->
            <div class="qBody code hidden">
                <label class="field">
                    <span>Kod</span>
                    <textarea class="qCode" rows="10"
                        placeholder="Python kodunu yapÄ±ÅŸtÄ±r (girintiler korunur)"></textarea>
                </label>

                <label class="field">
                    <span>Cevap (Ã¶ÄŸretmen)</span>
                    <textarea class="qAnswer" rows="4" placeholder="Beklenen Ã§Ä±ktÄ± / aÃ§Ä±klama / dÃ¼zeltme..."></textarea>
                </label>
            </div>
        </div>
    </template>

    <template id="tplOption">
        <div class="optRow">
            <input class="optText" type="text" placeholder="SeÃ§enek" />
            <button class="btn sm danger optDel" type="button">Sil</button>
        </div>
    </template>

    <template id="tplTFItem">
        <div class="tfRow">
            <select class="tfAns">
                <option value="">-</option>
                <option value="D">D</option>
                <option value="Y">Y</option>
            </select>
            <input class="tfText" type="text" placeholder="Madde" />
            <button class="btn sm danger tfDel" type="button">Sil</button>
        </div>
    </template>

    <template id="tplPair">
        <div class="pairRow">
            <input class="pairLeft" type="text" placeholder="Sol" />
            <span class="muted">â†”</span>
            <input class="pairRight" type="text" placeholder="SaÄŸ" />
            <input class="pairAns" type="number" min="1" placeholder="Cevap #" />
            <button class="btn sm danger pairDel" type="button">Sil</button>
        </div>
    </template>

    <script defer src="./app.js"></script>
    <script defer src="{{ url_for('static', filename='app.js') }}"></script>
</body>

</html>
